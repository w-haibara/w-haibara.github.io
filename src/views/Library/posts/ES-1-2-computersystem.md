# 高度試験 午前Ⅰ 備忘録 (コンピューターシステム編)

## フォンノイマンボトルネック
* p31

「ストアドプログラム方式」(プログラム内蔵方式)の性能向上を妨げる要因となるものは，
「プロセッサと記憶装置との間のデータ転送能力」

## 割り込み発生時のプロセッサの処理
* p32

ユーザプログラムの実行中に割り込みが発生した場合のプロセッサの処理

1. ユーザモードから特権モード(スーパバイザモード)への移行
2. プログラムカウンタなどの退避
3. 割り込み処理ルーチンの開始番地の決定
4. 割り込み処理ルーチンの実行
5. 退避したプログラムカウンタの値を復帰させて，元のユーザプログラムを続きから再開

## 割込みの要因
* p33

* 内部割込み
  * プログラム割り込み
    * 演算がオーバーフローした
  * スーパーバイザコール(SVC)割り込み
    * SVC命令による割込み
* 外部割込み
  * マシンチェック割込み (ハードウェア障害の検知)
    * データ保持時間が長い
  * 入出力割込み
    * DMA転送が完了した
  * タイマ割込み
    * インターバルタイマが満了した
  * コンソール割込み
    * キーボードやマウスから入力があった

## CPI
* p35

* Cycle / Instruction

1つの命令に必要なクロック数

* CPI x 命令数 = サイクル数

* サイクル数 x クロック周波数 = 処理時間

(単位に注意)

## パイプライン実行
* p35
* パイプライン
1つ1つの命令を「ステージ」という単位で分割して，
それぞれの命令の異なるステージを同時に処理することで，複数の命令を並行して実行できる．

## プロセッサの高速化
* p36

* ベクトルプロセッサ

「処理すべきベクトルの長さがベクトルレジスタよりも長い場合，
ベクトルレジスタ長の組に分割して処理を繰り返す方式である．」

* スーパーパイプライン

「パイプラインをさらに細分化することによって，高速化を図る方式である．」

* スーパースカラ

「複数のパイプラインを用い，同時に複数の命令を実行可能にすることによって，高速化を図る方式である．」

* VLIW (Very Long Instruction Word)

「命令語を長く取り，一つの命令で複数の機能ユニットを同時に制御することによって，高速化を図る方式である．」

## マルチコアプロセッサのコヒーレンシ

* p37

* スヌープキャッシュ
「共有バスを介して，各コアのキャッシュが他コアのキャッシュの更新状態を管理し，コヒーレンシを保つ．」

* ディレクトリ方式
「全てのキャッシュブロックを一元管理するディレクトリを用いて，キャッシュのコヒーレンシを保つ．」

## SIMD
* p38

* SISD (Single Instruction stream / Single Data stream)
 * シングルプロセッサの処理方式
 * 単一命令ストリームで単一データストリームを処理する方式

* SIMD (Single Instruction stream / Multiple Data stream)
 * シングルプロセッサの処理方式
 * 単一命令ストリームで複数のデータストリームを処理する方式
 
* MISD (Multiple Instruction stream / Single Data stream)
 * マルチプロセッサの処理方式
 * 複数の命令ストリームで単一データストリームを処理する方式
 
* MIMD (Multiple Instruction stream / Multiple Data stream)
 * マルチプロセッサの処理方式
 * 複数の命令ストリームで複数のデータストリームを処理する方式

## マルチプロセッサの性能・アムダールの法則
* p39

1代のCPUの性能を1とし
 * n : CPUの台数
 * a : オーバーヘッド
としたとき，マルチプロセッサの性能Pは

P = n / ( 1 + ( n - 1 )a )

で表される．

n->∞の極限を取ればわかるように，
nをいくら大きくしても，Pは1/aより大きくならない．

## SLC (Single-Level Cell) と MLC (Multi-Level Cell)
* p40

* MLCの良いところ
 
 * 1セル当たりの記憶容量が大きい．

* SLCの良いところ

 * 1セルあたりの書換え時間が短い．
 
 * 書換え可能回数が多い．
 
 * データ保持期間が長い．

## メモリアクセスの信頼性を高める方式
* p41

* ECC (Errot Checking and Correction)
  * データ誤りの自動訂正が可能
  * 2ビットの誤り検出と1ビットの誤り訂正が可能

* チェックサム
  * 誤り検出はできるが，誤り訂正はできない

* パリティ
  * 誤り検出はできるが，誤り訂正はできない

## キャッシュメモリ
* p42

* キャッシュメモリのヒット率は，プログラムの構造によって変化する．
  * キャッシュメモリのヒット率は，キャッシュメモリの容量に比例しない．
    * 容量が大きくなればヒット率は高くなるが，ヒット率が1に近づくと，どれだけ容量を増やしてもヒット率は改善されない．
  * キャッシュメモリの最適容量は，プログラムサイズだけでは決められない．
  * キャッシュメモリの最適容量は，ハードウェアの要素だけでは決められない．
  
## ライトバック方式とライトスルー方式
* p43

* ライトバック方式 (まずキャッシュに書き込み，フラッシュのタイミングで主記憶へ書き戻す)
  * プロセッサから主記憶への書込み頻度を減らす
  
* ライトスルー方式 (キャッシュと主記憶に同時に書き込む)
  * キャッシュと主記憶の一貫性(コヒーレンシ)を保ちながら，書込みを行う．
  * キャッシュミスが発生した時に，キャッシュの内容の主記憶への書き戻しを不要にする，

## メモリインタリーブ
* p44

* メモリインタリーブ
  * 主記憶を複数のバンクに分けて，CPUからのアクセス要求を並列的に処理できるようにする．
    * フォンノイマンボトルネックの影響を低減させる．

* 仮想記憶
  * 主記憶と外部記憶を一元的にアドレス付けし，主記憶の物理容量を超えるメモリ空間を提供する．

* キャッシュメモリ
  * 主記憶と磁気ディスク装置との間にバッファメモリを置いて，双方のアクセス速度の差を補う．

* DMA (Direct Memory Access)
  * 主記憶と入出力装置との間でCPUとは独自にデータ転送を行う．


## 実行アクセス時間
* p45

* (実行アクセス時間) = (キャッシュメモリのアクセス時間) x (ヒット率) + (主記憶のアクセス時間) x (1 - ヒット率)
  * ヒット率 : 読み出したいデータがキャッシュメモリ上に存在する確率
  
## I2Cバス
* p46

* 2線式のシリアルインターフェースで複数のデバイスを接続する．

## FC (ファイバチャネル)
* p47

* 伝送媒体には電気ケーブル又は光ケーブルを用いることができる．
  * ストレージ専用ネットワーク(SAN: Storage Area Network)で使われるプロトコル

## コンピュータと周辺装置のデータ転送方式
* p48

* パラレル転送方式では，転送クロックを高速化すると，データの各ビット間での信号到達タイミングの整合を取ることが困難になる．


* シリアル転送方式：1本の信号線でデータを1ビットずつ送る方式．
* クロック同期式：送信側と受信側で同期を取る方式(SATA，PCI Express，USB)
  * <--> クロック非同期式
  * 8b/10bエンコーディング：データの中にクロックを埋め込む方式の一種(8ビットのデータに2ビットのデータを埋め込む)
  
## 有機ELディスプレイ
* p49
* 有機ELディスプレイ
  * 電圧をかけて発光素子を発行させて表示する


* CRTディスプレイ
  * 電子ビームが発行体に衝突して生じる発行で表示する
* 液晶ディスプレイ
  * 透過する光の量を制御することで表示する
* プラズマディスプレイ
  * 放電によって発生した紫外線で蛍光体を発光させて表示する

## PWM信号を用いた音声出力
* p50
* マイコン --> ローパスフィルタ --> オーディオアンプ --> スピーカ
とすることでPWM信号をアナログ信号に変換することができる
  * ローパスフィルタの例：RC積分回路
  
## シンプロビジョニング
* p51

* 利用者の要求に対して仮想ボリュームを提供し，物理ディスクは実際の使用量に応じて割り当てる．






